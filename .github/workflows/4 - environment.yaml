name: 4 - Environment define Workflow

on:
  workflow_dispatch:

env:
  # Workflow declare variable
  t-workflow-var: "workflow-var"

  # Variable declared inside repo setting or Org setting
  setting-secret: ${{ secrets.SETTING_SECRET }}

  # Special token generated by Github app when new workflow triggered
  # Use for multiple action with Github api
  # Marking pull request label, auto assign pull request, list pull request of repo, etc.
  GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}


jobs:

  greeting:

    runs-on: ubuntu-latest
    
    env:
      t-job-var: "Job-var"

    steps:
      - name: Print current environment
        run: |
          env
          echo "--------------------------"
          echo ""
          env | grep "setting-secret"
          echo "--------------------------"
          echo ""
          env | grep "t-"

      - name: Print env of a step
        env:
          t-step-var: "Step-var"
        run: |
          env | grep "setting-secret"
          echo "--------------------------"
          echo ""
          env | grep "t-"
